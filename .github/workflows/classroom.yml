name: Git CTF Level Î© Validator
on: [push]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Gets all history for all branches

      - name: Force fetch all branches
        run: |
          # This is the "magic" command that fixes 'branch not found'
          git fetch --prune --unshallow origin "+refs/heads/*:refs/remotes/origin/*"

      - name: Run validator
        run: |
          chmod +x validate.sh
          ./validate.sh
